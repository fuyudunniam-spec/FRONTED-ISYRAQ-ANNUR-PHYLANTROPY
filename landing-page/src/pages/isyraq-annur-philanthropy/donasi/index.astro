---
import Layout from '../../../layouts/Layout.astro';
---

<Layout title="Investasi Peradaban | Isyraq An-Nur Philanthropy">
    <div class="pt-24 bg-paper min-h-screen">
        <main class="max-w-7xl mx-auto px-6 py-12">
            <div class="grid lg:grid-cols-12 gap-12">

                <!-- LEFT COLUMN: INTELLECTUAL PROGRAMS (Col 7) -->
                <div class="lg:col-span-7 space-y-10">

                    <div>
                        <span class="text-gold-600 font-bold uppercase tracking-[0.2em] text-xs mb-2 block">Filantropi
                            Pendidikan</span>
                        <h1 class="text-4xl md:text-5xl font-display text-royal-950 mb-4 leading-tight">Investasi Intelektual</h1>
                        <p class="text-slate-600 text-lg font-light leading-relaxed">
                            Berbeda dengan donasi konvensional, dana Anda di sini digunakan untuk <strong class="text-royal-950">mencetak ulama</strong> dan
                            <strong class="text-royal-950">mengembangkan kurikulum Islam</strong> yang relevan dengan zaman.
                        </p>
                    </div>

                    <!-- 1. Program List (Fokus Akademis & Peradaban) -->
                    <div class="space-y-4">

                        <!-- Program 1: The Core (Beasiswa Kader) -->
                        <label class="cursor-pointer block group">
                            <input type="radio" name="program" value="Beasiswa Kader Ulama & Teknokrat"
                                class="hidden program-radio" checked
                                onchange="updateProgram('Beasiswa Kader Ulama & Teknokrat')">
                            <div
                                class="border-2 border-slate-200 rounded-[2rem] p-6 transition-all duration-300 relative overflow-hidden bg-white hover:border-gold-400 shadow-sm">
                                <div class="flex gap-6">
                                    <div class="w-24 h-24 rounded-xl overflow-hidden shrink-0 bg-slate-200 relative">
                                        <img src="https://images.unsplash.com/photo-1532012197267-da84d127e765?q=80&w=200&auto=format&fit=crop"
                                            class="w-full h-full object-cover">
                                        <div class="absolute inset-0 bg-royal-950/20"></div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex justify-between items-start mb-2">
                                            <h3
                                                class="font-display text-xl text-royal-950 font-bold group-hover:text-gold-600 transition">
                                                Beasiswa Kader Ulama</h3>
                                            <div
                                                class="check-icon w-6 h-6 bg-royal-950 text-white rounded-full flex items-center justify-center opacity-0 transition-all transform scale-50">
                                                <i data-lucide="check" class="w-4 h-4"></i>
                                            </div>
                                        </div>
                                        <p class="text-sm text-slate-500 mb-4 line-clamp-2">Mencetak santri yang menguasai
                                            *Turats* (Kitab Kuning) sekaligus *Sains Modern*. Menanggung biaya riset dan
                                            kitab.</p>

                                        <div class="w-full bg-slate-100 rounded-full h-2 mb-2">
                                            <div class="bg-gold-400 h-2 rounded-full" style="width: 60%"></div>
                                        </div>
                                        <div
                                            class="flex justify-between text-xs font-bold text-slate-400 uppercase tracking-wider">
                                            <span>Dukungan: 150 Santri</span>
                                            <span>Target: 200 Santri</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </label>

                        <!-- Program 2: The SeekersGuidance Angle (Curriculum & Research) -->
                        <label class="cursor-pointer block group">
                            <input type="radio" name="program" value="Wakaf Riset & Kurikulum" class="hidden program-radio"
                                onchange="updateProgram('Wakaf Riset & Kurikulum')">
                            <div
                                class="border-2 border-slate-200 rounded-[2rem] p-6 transition-all duration-300 relative overflow-hidden bg-white hover:border-gold-400 shadow-sm">
                                <div class="flex gap-6">
                                    <div class="w-24 h-24 rounded-xl overflow-hidden shrink-0 bg-slate-200">
                                        <img src="https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?q=80&w=200&auto=format&fit=crop"
                                            class="w-full h-full object-cover">
                                        <div class="absolute inset-0 bg-royal-950/10"></div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex justify-between items-start mb-2">
                                            <h3
                                                class="font-display text-xl text-royal-950 font-bold group-hover:text-gold-600 transition">
                                                Wakaf Riset & Kurikulum</h3>
                                            <div
                                                class="check-icon w-6 h-6 bg-royal-950 text-white rounded-full flex items-center justify-center opacity-0 transition-all transform scale-50">
                                                <i data-lucide="check" class="w-4 h-4"></i>
                                            </div>
                                        </div>
                                        <p class="text-sm text-slate-500 mb-4 line-clamp-2">Pengembangan modul ajar Islam,
                                            digitalisasi manuskrip, dan platform *E-Learning* gratis untuk umat.</p>

                                        <span
                                            class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-royal-50 text-royal-800 text-xs font-bold uppercase tracking-wider border border-royal-100">
                                            <i data-lucide="globe" class="w-3 h-3"></i> Dakwah Global
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </label>

                        <!-- Program 3: Infrastructure (Study Center) -->
                        <label class="cursor-pointer block group">
                            <input type="radio" name="program" value="Pembangunan Pusat Studi (Library)"
                                class="hidden program-radio" onchange="updateProgram('Pembangunan Pusat Studi (Library)')">
                            <div
                                class="border-2 border-slate-200 rounded-[2rem] p-6 transition-all duration-300 relative overflow-hidden bg-white hover:border-gold-400 shadow-sm">
                                <div class="flex gap-6">
                                    <div class="w-24 h-24 rounded-xl overflow-hidden shrink-0 bg-slate-200">
                                        <img src="https://images.unsplash.com/photo-1505664194779-8beaceb93744?q=80&w=200&auto=format&fit=crop"
                                            class="w-full h-full object-cover">
                                        <div class="absolute inset-0 bg-royal-950/10"></div>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex justify-between items-start mb-2">
                                            <h3
                                                class="font-display text-xl text-royal-950 font-bold group-hover:text-gold-600 transition">
                                                Pembangunan Pusat Studi</h3>
                                            <div
                                                class="check-icon w-6 h-6 bg-royal-950 text-white rounded-full flex items-center justify-center opacity-0 transition-all transform scale-50">
                                                <i data-lucide="check" class="w-4 h-4"></i>
                                            </div>
                                        </div>
                                        <p class="text-sm text-slate-500 mb-4 line-clamp-2">Wakaf fisik untuk Perpustakaan
                                            Digital dan Asrama Mahasantri (Ma'had Aly).</p>

                                        <div class="w-full bg-slate-100 rounded-full h-2 mb-2">
                                            <div class="bg-royal-800 h-2 rounded-full" style="width: 30%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </label>
                    </div>

                    <!-- 2. INFO TABS (Focused on Impact & Knowledge) -->
                    <div class="bg-white rounded-[2rem] border border-slate-200 overflow-hidden shadow-sm">
                        <div class="flex border-b border-slate-100">
                            <button onclick="switchInfoTab('updates')" id="tab-updates"
                                class="tab-btn active flex-1 py-4 text-center text-sm font-bold text-slate-500 uppercase tracking-wider hover:bg-slate-50 transition">
                                Laporan Dampak
                            </button>
                            <button onclick="switchInfoTab('donors')" id="tab-donors"
                                class="tab-btn flex-1 py-4 text-center text-sm font-bold text-slate-500 uppercase tracking-wider hover:bg-slate-50 transition">
                                Para Pewakaf
                            </button>
                        </div>

                        <!-- Tab Content: ACADEMIC UPDATES -->
                        <div id="content-updates" class="p-8">
                            <div class="relative pl-8 border-l-2 border-slate-200 space-y-10">
                                <!-- Update 1 -->
                                <div class="relative">
                                    <div
                                        class="absolute -left-[39px] top-0 w-5 h-5 rounded-full border-4 border-white bg-royal-950">
                                    </div>
                                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest block mb-1">20
                                        Oktober 2024</span>
                                    <h5 class="font-bold text-royal-950 text-lg mb-2">Peluncuran Modul Fiqih Kontemporer
                                    </h5>
                                    <p class="text-sm text-slate-600 leading-relaxed mb-4 font-light">
                                        Tim riset Isyraq An-Nur telah menyelesaikan penyusunan Kitab Fiqih Muamalah Digital. Dana
                                        wakaf digunakan untuk riset, penulisan, dan distribusi digital gratis.
                                    </p>
                                    <span
                                        class="bg-gold-100 text-gold-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider block w-fit">Hasil Riset</span>
                                </div>
                                <!-- Update 2 -->
                                <div class="relative">
                                    <div
                                        class="absolute -left-[39px] top-0 w-5 h-5 rounded-full border-4 border-white bg-slate-300">
                                    </div>
                                    <span class="text-xs font-bold text-slate-400 uppercase tracking-widest block mb-1">15
                                        September 2024</span>
                                    <h5 class="font-bold text-royal-950 text-lg mb-2">5 Santri Lolos ke Al-Azhar Kairo</h5>
                                    <p class="text-sm text-slate-600 leading-relaxed font-light">
                                        Beasiswa Kader Ulama telah memberangkatkan 5 santri terbaik untuk melanjutkan studi
                                        jenjang S1 di Mesir.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Tab Content: DONORS -->
                        <div id="content-donors" class="hidden">
                            <div class="divide-y divide-slate-100 max-h-[500px] overflow-y-auto">
                                <!-- Donor 1 -->
                                <div class="p-6 hover:bg-slate-50 transition">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="flex items-center gap-3">
                                            <div
                                                class="w-10 h-10 rounded-full bg-gold-100 flex items-center justify-center text-gold-600 font-bold text-sm">
                                                HA</div>
                                            <div>
                                                <p class="font-bold text-royal-950 text-sm">Hamba Allah</p>
                                                <p class="text-xs text-slate-400 uppercase tracking-wider font-bold">Wakaf Kurikulum</p>
                                            </div>
                                        </div>
                                        <span class="font-bold text-royal-950 text-sm">Rp 10.000.000</span>
                                    </div>
                                    <div class="bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100">
                                        <p class="text-sm text-royal-900 italic font-light">"Semoga lahir ulama-ulama besar dari
                                            Isyraq An-Nur yang mencerahkan umat."</p>
                                    </div>
                                </div>

                                <!-- Donor 2 -->
                                <div class="p-6 hover:bg-slate-50 transition">
                                    <div class="flex justify-between items-start mb-2">
                                        <div class="flex items-center gap-3">
                                            <div
                                                class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-sm">
                                                DR</div>
                                            <div>
                                                <p class="font-bold text-royal-950 text-sm">Dr. Rahmat Sp.A</p>
                                                <p class="text-xs text-slate-400 uppercase tracking-wider font-bold">Beasiswa Kader</p>
                                            </div>
                                        </div>
                                        <span class="font-bold text-royal-950 text-sm">Rp 1.500.000</span>
                                    </div>
                                    <div class="bg-slate-50 p-4 rounded-xl rounded-tl-none border border-slate-100">
                                        <p class="text-sm text-royal-900 italic font-light">"Untuk biaya kitab santri takhassus. Mohon
                                            doanya."</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- RIGHT COLUMN: FORM (Sticky) -->
                <div class="lg:col-span-5 relative">
                    <div class="sticky top-28 bg-white p-8 rounded-[2.5rem] shadow-2xl border border-slate-100">

                        <div class="text-center mb-8">
                            <p class="text-xs font-bold text-gold-600 uppercase tracking-widest mb-2">Akad Wakaf Ilmu</p>
                            <h2 class="text-2xl font-display text-royal-950 leading-tight" id="selectedProgramTitle">
                                Beasiswa Kader Ulama & Teknokrat</h2>
                        </div>

                        <form id="donationForm" class="space-y-6" onsubmit="handleDonation(event)">
                            <!-- Nominal -->
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-3">Nominal
                                    Investasi</label>
                                <div class="grid grid-cols-3 gap-3 mb-4">
                                    <button type="button"
                                        class="amt-btn py-3 rounded-xl border border-slate-200 text-sm font-bold text-royal-950 hover:border-royal-950 transition active-btn"
                                        onclick="setAmount(100000, this)">100rb</button>
                                    <button type="button"
                                        class="amt-btn py-3 rounded-xl border border-slate-200 text-sm font-bold text-royal-950 hover:border-royal-950 transition"
                                        onclick="setAmount(500000, this)">500rb</button>
                                    <button type="button"
                                        class="amt-btn py-3 rounded-xl border border-slate-200 text-sm font-bold text-royal-950 hover:border-royal-950 transition"
                                        onclick="setAmount(1000000, this)">1 Jt</button>
                                </div>
                                <div class="relative">
                                    <span
                                        class="absolute left-4 top-1/2 -translate-y-1/2 text-royal-950 font-bold font-display">Rp</span>
                                    <input type="number" id="customAmount"
                                        class="w-full bg-slate-50 border border-slate-200 rounded-xl py-4 pl-12 font-bold text-royal-950 focus:outline-none focus:border-royal-950 focus:ring-1 focus:ring-royal-950 transition shadow-sm"
                                        placeholder="Nominal Lainnya..." required>
                                </div>
                            </div>

                            <!-- Identitas -->
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Nama
                                        Wakif</label>
                                    <input type="text" id="donorName"
                                        class="w-full bg-white border border-slate-200 rounded-xl py-3 px-4 font-medium text-royal-950 focus:outline-none focus:border-gold-400 transition"
                                        placeholder="Nama Lengkap" required>
                                </div>
                                <div>
                                    <label
                                        class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2">Kontak
                                        (WhatsApp)</label>
                                    <input type="text" id="donorPhone"
                                        class="w-full bg-white border border-slate-200 rounded-xl py-3 px-4 font-medium text-royal-950 focus:outline-none focus:border-gold-400 transition"
                                        placeholder="08..." required>
                                </div>
                            </div>

                            <!-- Doa / Hajat -->
                            <div class="bg-gold-50 p-6 rounded-2xl border border-gold-200">
                                <label
                                    class="block text-xs font-bold text-gold-700 uppercase tracking-wider mb-2 flex items-center gap-2">
                                    <i data-lucide="feather" class="w-4 h-4 text-gold-600"></i> Pesan / Hajat Khusus
                                </label>
                                <textarea id="donorDoa" rows="3"
                                    class="w-full bg-white border border-gold-200 rounded-xl py-3 px-4 text-sm text-royal-950 placeholder-slate-400 focus:outline-none focus:border-gold-500 transition resize-none font-light"
                                    placeholder="Semoga menjadi amal jariyah ilmu yang bermanfaat..."></textarea>
                                <div class="mt-3 flex items-center gap-2">
                                    <input type="checkbox" id="hideName"
                                        class="w-4 h-4 text-royal-950 border-slate-300 rounded focus:ring-royal-950">
                                    <label for="hideName" class="text-xs text-slate-500 font-medium">Sembunyikan nama (Hamba Allah)</label>
                                </div>
                            </div>

                            <!-- Submit to WhatsApp -->
                            <button type="submit"
                                class="w-full py-5 bg-royal-950 text-white rounded-full shadow-lg hover:bg-royal-900 transition transform hover:-translate-y-1 relative overflow-hidden group">
                                <div
                                    class="absolute inset-0 bg-white/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
                                </div>
                                <span
                                    class="relative font-display font-bold uppercase tracking-widest text-sm flex items-center justify-center gap-2">
                                    Tunaikan Wakaf <i data-lucide="arrow-right" class="w-4 h-4 text-gold-400"></i>
                                </span>
                            </button>

                            <p class="text-[10px] text-center text-slate-400 uppercase tracking-widest font-bold">
                                Transaksi Aman & Terenkripsi
                            </p>
                        </form>
                    </div>
                </div>

            </div>
        </main>
    </div>
</Layout>

<style>
    .amt-btn.active-btn {
        background-color: #0c4a6e;
        color: white;
        border-color: #0c4a6e;
    }
    
    .tab-btn.active {
        color: #0c4a6e;
        border-bottom: 2px solid #b4941f;
        background-color: #f8fafc;
    }

    .program-radio:checked + div {
        border-color: #b4941f;
        background-color: #fefce8;
    }

    .program-radio:checked + div .check-icon {
        opacity: 1;
        transform: scale(1);
    }
</style>

<script is:inline>
    function updateProgram(title) {
        document.getElementById('selectedProgramTitle').innerText = title;
        if (window.innerWidth < 1024) {
            document.getElementById('selectedProgramTitle').scrollIntoView({ behavior: 'smooth' });
        }
    }

    function setAmount(amount, btnElement) {
        document.getElementById('customAmount').value = amount;
        document.querySelectorAll('.amt-btn').forEach(btn => btn.classList.remove('active-btn'));
        btnElement.classList.add('active-btn');
    }

    function switchInfoTab(tabName) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById('tab-' + tabName).classList.add('active');
        document.getElementById('content-updates').classList.add('hidden');
        document.getElementById('content-donors').classList.add('hidden');
        document.getElementById('content-' + tabName).classList.remove('hidden');
    }

    function handleDonation(e) {
        e.preventDefault();

        const program = document.getElementById('selectedProgramTitle').innerText;
        const amount = document.getElementById('customAmount').value;
        const name = document.getElementById('donorName').value;
        const isHambaAllah = document.getElementById('hideName').checked;
        const displayName = isHambaAllah ? name + " (Mohon disamarkan)" : name;
        const doa = document.getElementById('donorDoa').value || "-";

        const formattedAmount = new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(amount);

        const message = `Assalamu'alaikum Admin Isyraq An-Nur,%0A%0ABismillah, saya ingin berpartisipasi dalam *Investasi Peradaban*:%0A%0Aüìö Program: *${program}*%0Aüí∞ Komitmen Wakaf: *${formattedAmount}*%0Aüë§ Nama Wakif: *${displayName}*%0Aüìù Pesan/Doa: ${doa}%0A%0AMohon panduan untuk penyaluran dana wakaf ini. Terima kasih.`;

        const adminNumber = "6281234567890";

        window.open(`https://wa.me/${adminNumber}?text=${message}`, '_blank');
    }
</script>

